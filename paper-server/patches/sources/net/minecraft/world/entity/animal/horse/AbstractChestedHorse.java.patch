From 8970c8040a87bb9da1d22cabfd5dafb79924ed1f Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 06:37:42 -0700
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/world/entity/animal/horse/AbstractChestedHorse.java b/net/minecraft/world/entity/animal/horse/AbstractChestedHorse.java
index b903cef8223c4adc1ea4df6af2e99c9a14c8b134..55ab5a91b7fea4275f0f96695f6f7a92ee100254 100644
--- a/net/minecraft/world/entity/animal/horse/AbstractChestedHorse.java
+++ b/net/minecraft/world/entity/animal/horse/AbstractChestedHorse.java
@@ -70,6 +70,12 @@ public abstract class AbstractChestedHorse extends AbstractHorse {
         super.dropEquipment(level);
         if (this.hasChest()) {
             this.spawnAtLocation(level, Blocks.CHEST);
+            // Paper start - moved to post death logic
+        }
+    }
+    protected void postDeathDropItems(org.bukkit.event.entity.EntityDeathEvent event) {
+        if (this.hasChest() && !event.isCancelled()) {
+            // Paper end - moved to post death logic
             this.setChest(false);
         }
     }
