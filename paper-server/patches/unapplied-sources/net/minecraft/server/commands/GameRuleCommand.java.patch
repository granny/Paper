From 8970c8040a87bb9da1d22cabfd5dafb79924ed1f Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 06:37:42 -0700
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/server/commands/GameRuleCommand.java b/net/minecraft/server/commands/GameRuleCommand.java
index 049cbd5cc4020905fc4edc035acbcd2e21d23f62..4b492198df4d34d8ca79612c2cae87e27ddb6efe 100644
--- a/net/minecraft/server/commands/GameRuleCommand.java
+++ b/net/minecraft/server/commands/GameRuleCommand.java
@@ -30,14 +30,14 @@ public class GameRuleCommand {
 
     static <T extends GameRules.Value<T>> int setRule(CommandContext<CommandSourceStack> source, GameRules.Key<T> gameRule) {
         CommandSourceStack commandSourceStack = source.getSource();
-        T rule = commandSourceStack.getServer().getGameRules().getRule(gameRule);
-        rule.setFromArgument(source, "value");
+        T rule = commandSourceStack.getLevel().getGameRules().getRule(gameRule); // CraftBukkit
+        rule.setFromArgument(source, "value", gameRule); // Paper - Add WorldGameRuleChangeEvent
         commandSourceStack.sendSuccess(() -> Component.translatable("commands.gamerule.set", gameRule.getId(), rule.toString()), true);
         return rule.getCommandResult();
     }
 
     static <T extends GameRules.Value<T>> int queryRule(CommandSourceStack source, GameRules.Key<T> gameRule) {
-        T rule = source.getServer().getGameRules().getRule(gameRule);
+        T rule = source.getLevel().getGameRules().getRule(gameRule); // CraftBukkit
         source.sendSuccess(() -> Component.translatable("commands.gamerule.query", gameRule.getId(), rule.toString()), false);
         return rule.getCommandResult();
     }
