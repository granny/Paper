From 8970c8040a87bb9da1d22cabfd5dafb79924ed1f Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 06:37:42 -0700
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/server/rcon/thread/RconThread.java b/net/minecraft/server/rcon/thread/RconThread.java
index 7b38a169149669430ac930e66e4f3822bc2b272d..f23cc9ea16618c1d023edf97577501116ae6abea 100644
--- a/net/minecraft/server/rcon/thread/RconThread.java
+++ b/net/minecraft/server/rcon/thread/RconThread.java
@@ -57,7 +57,7 @@ public class RconThread extends GenericThread {
     @Nullable
     public static RconThread create(ServerInterface serverInterface) {
         DedicatedServerProperties properties = serverInterface.getProperties();
-        String serverIp = serverInterface.getServerIp();
+        String serverIp = properties.rconIp; // Paper - Configurable rcon ip
         if (serverIp.isEmpty()) {
             serverIp = "0.0.0.0";
         }
@@ -104,6 +104,14 @@ public class RconThread extends GenericThread {
 
         this.clients.clear();
     }
+    // Paper start - don't wait for remote connections
+    public void stopNonBlocking() {
+        this.running = false;
+        for (RconClient client : this.clients) {
+            client.running = false;
+        }
+    }
+    // Paper end - don't wait for remote connections
 
     private void closeSocket(ServerSocket socket) {
         LOGGER.debug("closeSocket: {}", socket);
