From 8970c8040a87bb9da1d22cabfd5dafb79924ed1f Mon Sep 17 00:00:00 2001
From: File <noreply+automated@papermc.io>
Date: Sun, 20 Apr 1997 06:37:42 -0700
Subject: [PATCH] paper File Patches


diff --git a/net/minecraft/world/entity/InsideBlockEffectType.java b/net/minecraft/world/entity/InsideBlockEffectType.java
index a8b4e62f4da42710ff900bd3a6c5732f8d4ca4ef..bbee51887deaef7eaf50f7ad563f6540703d2e9b 100644
--- a/net/minecraft/world/entity/InsideBlockEffectType.java
+++ b/net/minecraft/world/entity/InsideBlockEffectType.java
@@ -6,21 +6,34 @@ import net.minecraft.world.level.block.BaseFireBlock;
 public enum InsideBlockEffectType {
     FREEZE(entity -> {
         entity.setIsInPowderSnow(true);
-        if (entity.canFreeze()) {
+        if (entity.canFreeze() && !entity.freezeLocked) { // Paper - Freeze Tick Lock API
             entity.setTicksFrozen(Math.min(entity.getTicksRequiredToFreeze(), entity.getTicksFrozen() + 1));
         }
     }),
     FIRE_IGNITE(BaseFireBlock::fireIgnite),
-    LAVA_IGNITE(Entity::lavaIgnite),
+    LAVA_IGNITE((entity, pos) -> entity.lavaIgnite(pos)), // Paper - track lava contact
     EXTINGUISH(Entity::clearFire);
 
-    private final Consumer<Entity> effect;
+    private final Applier effect; // Paper - track position inside effect was triggered on
 
     private InsideBlockEffectType(final Consumer<Entity> effect) {
+    // Paper start - track position inside effect was triggered on
+        this((entity, block) -> effect.accept(entity));
+    }
+    private InsideBlockEffectType(final Applier effect) {
+    // Paper end - track position inside effect was triggered on
         this.effect = effect;
     }
 
-    public Consumer<Entity> effect() {
+    public Applier effect() { // Paper - track position inside effect was triggered on
         return this.effect;
     }
+
+    // Paper start - track position inside effect was triggered on
+    // Use over biconsumer for less fqn spamming.
+    @FunctionalInterface
+    public interface Applier {
+        void affect(final Entity entity, final net.minecraft.core.BlockPos blockPos);
+    }
+    // Paper end - track position inside effect was triggered on
 }
